<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paper Fold Effect</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css" />
</head>

<body>

    <!-- ========== BACK BUTTON ========== -->
    <a href="../index.html#wrap-fold" class="back-btn-top">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="19" y1="12" x2="5" y2="12"></line>
            <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
    </a>

    <!-- ========== LEFT: Paper Fold Demo ========== -->
    <div class="paper-demo">
        <div class="scene">
            <div class="paper-panel top-panel">
                <div class="crease-shadow" id="shadow-top"
                    style="background: linear-gradient(to bottom, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0) 30%);"></div>

                <div class="paper-panel middle-panel" id="middle">
                    <div class="crease-shadow" id="shadow-mid"
                        style="background: linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0.05) 50%, rgba(0,0,0,0.2) 100%);">
                    </div>

                    <div class="paper-panel bottom-panel" id="bottom">
                        <div class="crease-shadow" id="shadow-bot"
                            style="background: linear-gradient(to bottom, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0) 30%);">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== RIGHT: Mobile App ========== -->
    <div style="display:flex; flex-direction:column; align-items:center;">
        <div class="mobile-container">
            <!-- Status Bar -->
            <div class="status-bar">
                <span class="time">9:41</span>
                <div class="status-icons">
                    <svg width="17" height="14" viewBox="0 0 17 14" fill="none">
                        <rect x="0" y="10" width="3" height="4" rx="1" fill="#000" />
                        <rect x="4.5" y="7" width="3" height="7" rx="1" fill="#000" />
                        <rect x="9" y="4" width="3" height="10" rx="1" fill="#000" />
                        <rect x="13.5" y="0" width="3" height="14" rx="1" fill="#000" />
                    </svg>
                    <svg width="16" height="12" viewBox="0 0 16 12" fill="none">
                        <path
                            d="M8 2.5C10.5 2.5 12.7 3.5 14.3 5.1L15.7 3.7C13.7 1.7 11 0.5 8 0.5C5 0.5 2.3 1.7 0.3 3.7L1.7 5.1C3.3 3.5 5.5 2.5 8 2.5Z"
                            fill="#000" />
                        <path
                            d="M8 5.5C9.7 5.5 11.2 6.1 12.4 7.1L13.8 5.7C12.2 4.3 10.2 3.5 8 3.5C5.8 3.5 3.8 4.3 2.2 5.7L3.6 7.1C4.8 6.1 6.3 5.5 8 5.5Z"
                            fill="#000" />
                        <path
                            d="M8 8.5C9 8.5 9.9 8.9 10.5 9.5L12 8C10.9 7 9.5 6.5 8 6.5C6.5 6.5 5.1 7 4 8L5.5 9.5C6.1 8.9 7 8.5 8 8.5Z"
                            fill="#000" />
                        <circle cx="8" cy="11" r="1.5" fill="#000" />
                    </svg>
                    <div class="battery">
                        <div class="battery-body">
                            <div class="battery-level"></div>
                        </div>
                        <div class="battery-cap"></div>
                    </div>
                </div>
            </div>

            <!-- Header -->
            <header class="header">
                <button class="back-btn" aria-label="Back">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M15 18L9 12L15 6" stroke="#000" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                </button>
            </header>

            <!-- Article Header - FIXED -->
            <div class="article-header-fixed">
                <span class="category">Inclusive Design</span>
                <h1 class="title">Accessibility Isn't a Checklist Anymore</h1>
                <div class="author-info">
                    <div class="author-avatar">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="8" r="4" stroke="#666" stroke-width="1.5" />
                            <path d="M4 20C4 16.6863 7.58172 14 12 14C16.4183 14 20 16.6863 20 20" stroke="#666"
                                stroke-width="1.5" stroke-linecap="round" />
                        </svg>
                    </div>
                    <span class="author-name">Jamie Park</span>
                    <span class="publish-date">31 Jan 2026</span>
                </div>
            </div>

            <!--
            Fold structure:
            art-top (이미지) ← 고정
              └ art-mid (첫 번째 문단) ← 이미지 아래에서 접힘
                └ art-bot (두 번째 문단) ← 첫 문단 아래에서 접힘
        -->
            <div class="fold-area">
                <!-- TOP: 이미지만 (고정, 회전 안 함) -->
                <div class="art-panel art-top">
                    <div class="fold-shadow" id="artShadowTop" style="background: none;"></div>
                    <div class="featured-image">
                        <img src="https://images.unsplash.com/photo-1545569341-9eb8b30979d9?w=800&q=80"
                            alt="Japanese umbrellas">
                    </div>

                    <!-- MID: 첫 번째 문단 (이미지 밑에서 접힘) -->
                    <div class="art-panel art-mid" id="artMid">
                        <div class="fold-shadow" id="artShadowMid"
                            style="background: linear-gradient(to bottom, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0) 35%);">
                        </div>
                        <div class="article-body">
                            <p>Accessibility work is shifting from "final QA checks" to early-stage design decisions.
                                Teams
                                are testing contrast, keyboard navigation, and readable typography earlier—because
                                fixing
                                accessibility late is expensive and often incomplete.</p>
                        </div>

                        <!-- BOT: 두 번째 문단 (첫 문단 밑에서 접힘) -->
                        <div class="art-panel art-bot" id="artBot">
                            <div class="fold-shadow" id="artShadowBot"
                                style="background: linear-gradient(to bottom, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0) 40%);">
                            </div>
                            <div class="article-body">
                                <p>A big change: designers are learning to build systems with accessible defaults. That
                                    includes color tokens that pass contrast automatically, components that support
                                    assistive tech out of the box, and layouts that scale gracefully.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Summary Sheet -->
            <div class="summary-sheet" id="summarySheet">
                <div class="drag-handle" id="dragHandle">
                    <div class="handle-bar"></div>
                </div>
                <div class="summary-content">
                    <span class="summary-tag">summary</span>
                    <h2 class="summary-title">Accessibility by Default</h2>
                    <ul class="summary-list">
                        <li>Accessibility is shifting from <strong>late-stage QA</strong> to <strong>early design
                                decisions.</strong></li>
                        <li>Teams are building accessible-by-default systems: contrast-safe color tokens,
                            assistive-tech-ready components, and scalable layouts.</li>
                        <li>The payoff: clearer, smoother, more polished UX for everyone.</li>
                    </ul>
                </div>
            </div>

            <!-- Home Indicator -->
            <div class="home-indicator"></div>
        </div>
        <p style="color:#888; font-size:16px; font-weight:500; letter-spacing:-0.3px; margin-top:-40px;">하단바를 올려보세요</p>
    </div>
    <script>
        // Right side elements
        const summarySheet = document.getElementById('summarySheet');
        const dragHandle = document.getElementById('dragHandle');
        const artMid = document.getElementById('artMid');
        const artBot = document.getElementById('artBot');
        const artShadowTop = document.getElementById('artShadowTop');
        const artShadowMid = document.getElementById('artShadowMid');
        const artShadowBot = document.getElementById('artShadowBot');

        // Left side elements
        const middlePanel = document.getElementById('middle');
        const bottomPanel = document.getElementById('bottom');
        const shadowTop = document.getElementById('shadow-top');
        const shadowMid = document.getElementById('shadow-mid');
        const shadowBot = document.getElementById('shadow-bot');

        let isDragging = false;
        let startY = 0;
        let currentProgress = 0;

        const MAX_SHEET_TRAVEL = 560;

        function updateFold(progress) {
            progress = Math.max(0, Math.min(1, progress));
            currentProgress = progress;

            // Summary sheet position
            const openOffset = 60;
            const sheetY = (1 - progress) * MAX_SHEET_TRAVEL + progress * openOffset;
            summarySheet.style.transform = `translateY(${sheetY}px)`;

            // Fold angle (0 → 178 degrees)
            const foldAngle = 178 * progress;

            // RIGHT: Article fold
            artMid.style.transform = `rotateX(${foldAngle}deg)`;
            artBot.style.transform = `rotateX(${-foldAngle}deg)`;

            // Shadows
            const shadowVal = progress * 0.7;
            artShadowTop.style.opacity = 0; // 이미지 위에는 그림자 없음
            artShadowMid.style.opacity = shadowVal;
            artShadowBot.style.opacity = shadowVal;

            // LEFT: Paper demo sync
            middlePanel.style.transform = `rotateX(${foldAngle}deg)`;
            bottomPanel.style.transform = `rotateX(${-foldAngle}deg)`;
            shadowTop.style.opacity = shadowVal;
            shadowMid.style.opacity = shadowVal;
            shadowBot.style.opacity = shadowVal;
        }

        // Mouse events
        dragHandle.addEventListener('mousedown', (e) => {
            isDragging = true;
            startY = e.clientY;
            document.body.style.userSelect = 'none';
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            const deltaY = startY - e.clientY;
            updateFold(currentProgress + deltaY / MAX_SHEET_TRAVEL);
            startY = e.clientY;
        });

        document.addEventListener('mouseup', () => {
            if (!isDragging) return;
            isDragging = false;
            document.body.style.userSelect = '';
            animateTo(currentProgress > 0.5 ? 1 : 0);
        });

        // Touch events
        dragHandle.addEventListener('touchstart', (e) => {
            isDragging = true;
            startY = e.touches[0].clientY;
        }, { passive: true });

        document.addEventListener('touchmove', (e) => {
            if (!isDragging) return;
            const deltaY = startY - e.touches[0].clientY;
            updateFold(currentProgress + deltaY / MAX_SHEET_TRAVEL);
            startY = e.touches[0].clientY;
        }, { passive: true });

        document.addEventListener('touchend', () => {
            if (!isDragging) return;
            isDragging = false;
            animateTo(currentProgress > 0.5 ? 1 : 0);
        });

        function animateTo(target) {
            const start = currentProgress;
            const startTime = performance.now();

            function animate(now) {
                const p = Math.min((now - startTime) / 300, 1);
                updateFold(start + (target - start) * (1 - Math.pow(1 - p, 3)));
                if (p < 1) requestAnimationFrame(animate);
            }
            requestAnimationFrame(animate);
        }

        dragHandle.addEventListener('click', () => {
            animateTo(currentProgress < 0.5 ? 1 : 0);
        });

        updateFold(0);
    </script>
</body>

</html>